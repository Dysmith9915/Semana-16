import tkinter as tk
from tkinter import messagebox

# Ventana principal
ventana = tk.Tk()
ventana.title("Tres en Raya")
ventana.resizable(False, False)

# Variables
turno = "X"
casillas = [""] * 9
botones = []

# Función para verificar si alguien ganó
def revisar_ganador():
    combinaciones = [
        (0,1,2), (3,4,5), (6,7,8), # horizontales
        (0,3,6), (1,4,7), (2,5,8), # verticales
        (0,4,8), (2,4,6)           # diagonales
    ]
    for a, b, c in combinaciones:
        if casillas[a] == casillas[b] == casillas[c] != "":
            return True
    return False

# Función cuando se hace clic en un botón
def jugar(pos):
    global turno
    if casillas[pos] == "":
        casillas[pos] = turno
        botones[pos].config(text=turno, state="disabled")

        if revisar_ganador():
            messagebox.showinfo("Ganador", f"¡{turno} gana!")
            reiniciar()
        elif "" not in casillas:
            messagebox.showinfo("Empate", "¡Nadie gana!")
            reiniciar()
        else:
            turno = "O" if turno == "X" else "X"

# Función para reiniciar el juego
def reiniciar():
    global casillas, turno
    casillas = [""] * 9
    turno = "X"
    for b in botones:
        b.config(text="", state="normal")

# Crear botones del tablero
for i in range(9):
    b = tk.Button(ventana, text="", width=6, height=3, font=("Arial", 30),
                  command=lambda i=i: jugar(i))
    b.grid(row=i//3, column=i%3)
    botones.append(b)

ventana.mainloop()
